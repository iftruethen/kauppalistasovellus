{% extends "layout.html" %}

{% block title %}Kauppalistasovellus{% endblock %}
{% block content %}
    <body>
        {% if session.username %}
            <h2>{{ list_name }}</h2>
            {% if items %}
            <ul>
                {% for item in items %}
                    <li>
                        <form method="POST" action="/remove_item/{{item.id}}">
                            {{ item.content }}
                            <input type="submit" value="poista">
                            <input type="hidden" name="list_id" value="{{ list_id }}">
                            <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
                        </form>
                    </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>Tämä lista on tyhjä!</p>
            {% endif %}
            <p>
            <form action="/list/{{list_id}}" method="POST">
                <label for="new_item">Lisää tuote listalle:</label>
                <input type="text" name="new_item_name">
                <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
                <input type="submit">
            </form>
            <hr />
            <p>Kommentit</p>
            <form action="/newcomment/{{ list_id }}" method="POST">
                  <p>
                    <textarea name="content" rows="5" cols="40"></textarea>
                  </p>
                  <input type="submit" value="Lähetä" />
            </form>
            <hr />
            <form action="/remove_list/{{list_id}}" method="GET">
                <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
                <input type="submit" value="Poista lista">
            </form>
            </p>
        {% else %}
            <p>Sinun pitää <a href="/">kirjautua sisään</a></p>
        {% endif %}
{% endblock %}